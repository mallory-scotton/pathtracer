///////////////////////////////////////////////////////////////////////////////
// Header guard
///////////////////////////////////////////////////////////////////////////////
#pragma once

///////////////////////////////////////////////////////////////////////////////
// Dependencies
///////////////////////////////////////////////////////////////////////////////
#include "Config.hpp"
#include "Maths/Utils.hpp"
#include "ImGui/stb_image.h"

///////////////////////////////////////////////////////////////////////////////
// Namespace Ray
///////////////////////////////////////////////////////////////////////////////
namespace Ray
{

///////////////////////////////////////////////////////////////////////////////
/// \brief
///
///////////////////////////////////////////////////////////////////////////////
class EnvironmentMap
{
public:
    ///////////////////////////////////////////////////////////////////////////
    //
    ///////////////////////////////////////////////////////////////////////////
    int width;                  //<!
    int height;                 //<!
    float totalSum;             //<!
    UniquePtr<float[]> img;     //<!
    UniquePtr<float[]> cdf;     //<!

public:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    ///////////////////////////////////////////////////////////////////////////
    EnvironmentMap(void);

    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    ///////////////////////////////////////////////////////////////////////////
    ~EnvironmentMap();

public:
    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    /// \param filename
    ///
    /// \return
    ///
    ///////////////////////////////////////////////////////////////////////////
    bool LoadMap(const String& filename);

    ///////////////////////////////////////////////////////////////////////////
    /// \brief
    ///
    ///////////////////////////////////////////////////////////////////////////
    void BuildCDF(void);
};

} // namespace Ray
